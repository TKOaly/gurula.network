import chroma from "chroma-js";
import { useState } from "react";
import * as R from "remeda";

const shuffle = <T extends unknown>(unshuffled: T[]): T[] => unshuffled
  .map(value => ({ value, sort: Math.random() }))
  .sort((a, b) => a.sort - b.sort)
  .map(({ value }) => value);

const GUR_COLORS = [
  '#ef4444',
  '#22c55e',
  '#0ea5e9',
];

export const Logo = () => {
  const [[g, u, r], setColors] = useState(shuffle(GUR_COLORS));

  const reshuffleColors = () => {
    let newColors = [g, u, r];

    do {
      newColors = shuffle(GUR_COLORS);
    } while (R.equals(newColors, [g, u, r]));

    setColors(newColors);
  };

  const colors = {
    g, u, r,
    ula: 'gray',
    network: 'gray',
  };

  const generateGradient = (id: string, color: string) => (
    <linearGradient id={id} x1={0} x2={0} y1={0} y2={1}>
      <stop offset="0%" stop-color={chroma(color).brighten(0.33)} />
      <stop offset="100%" stop-color={chroma(color).darken(0.33)} />
    </linearGradient>
  );

  return (
    <svg onClick={reshuffleColors} width="92.318mm" height="18.415mm" version="1.1" viewBox="0 0 92.318 18.415" xmlns="http://www.w3.org/2000/svg" className="w-full h-full cursor-pointer">
      <defs>
        {Object.entries(colors).map(([ name, color ]) => generateGradient(`${name}_gradient`, color))}
      </defs>
      <g transform="translate(-60.315 -62.893)" stroke-width=".26458">
        <g aria-label="GUR">
          <path fill="url(#g_gradient)" d="m76.349 70.408v8.9958q-2.54 1.8521-6.4029 1.8521-4.2862 0-6.9585-2.4606t-2.6723-6.694q0-4.1804 2.7781-6.694 2.8046-2.5135 7.0908-2.5135 3.0162 0 5.2123 1.1112v4.0746q-2.54-1.4552-5.2123-1.4552-2.5135 0-3.9952 1.5081-1.4817 1.4817-1.4817 3.9687 0 2.5135 1.4552 3.9952 1.4552 1.4817 3.9687 1.4817 1.1377 0 2.249-0.34396v-3.3602h-2.884v-3.466z"/>
          <path fill="url(#u_gradient)" d="m89.948 74.165v-10.954h4.0746v10.927q0 3.4925-1.9579 5.3446-1.9579 1.8256-5.2917 1.8256-3.2808 0-5.2652-1.8256-1.9844-1.8256-1.9844-5.1594v-11.112h4.0746v11.086q0 3.3073 3.175 3.3073 3.175 0 3.175-3.4396z"/>
          <path fill="url(#r_gradient)" d="m101.4 66.518v5.0271h1.9315q2.6458 0 2.6458-2.5929 0-1.1377-0.68792-1.7727-0.68792-0.66146-1.8785-0.66146zm5.1064 14.526-3.8629-6.1912h-1.2435v6.1912h-4.0746v-17.833h6.1648q2.9898 0 4.789 1.5875 1.8256 1.5875 1.8256 4.1275 0 3.81-3.2544 5.2652l4.5244 6.8527z"/>
        </g>
        <g transform="translate(0 .52917)" fill="#36363c" aria-label="ULA">
          <path d="m118.18 68.37v-5.4769h2.0373v5.4637q0 1.7463-0.97896 2.6723-0.97896 0.91282-2.6458 0.91282-1.6404 0-2.6326-0.91282t-0.99219-2.5797v-5.5563h2.0373v5.543q0 1.6536 1.5875 1.6536 1.5875 0 1.5875-1.7198z"/>
          <path d="m123.91 70.024h3.2941v1.7859h-5.3314v-8.9165h2.0373z"/>
          <path d="m130.93 68.344h2.1431l-0.0926-0.3175q-0.38364-1.2965-0.635-2.2093-0.23812-0.91282-0.29104-1.1774l-0.0529-0.26458q-0.10583 0.72761-0.97896 3.6513zm3.175 3.4661-0.54239-1.8256h-3.1221l-0.5424 1.8256h-2.1299l2.9766-8.9165h2.5665l2.9766 8.9165z"/>
        </g>
        <g fill="#36363c" aria-label=".network">
          <path d="m113.52 81.118q-0.17992-0.17992-0.17992-0.4445 0-0.26458 0.17992-0.4445 0.17991-0.17992 0.4445-0.17992 0.26458 0 0.4445 0.17992 0.17991 0.17992 0.17991 0.4445 0 0.26458-0.17991 0.4445-0.17992 0.17992-0.4445 0.17992-0.26459 0-0.4445-0.17992z"/>
          <path d="m116.44 75.847v0.93133q0.47625-1.0054 1.6933-1.0054 0.78316 0 1.2488 0.47625t0.46567 1.27v3.6936h-0.83609v-3.4713q0-0.59266-0.30691-0.89958-0.29633-0.3175-0.78317-0.3175-0.60324 0-1.0477 0.46566-0.43392 0.46566-0.43392 1.2912v2.9316h-0.82549v-5.3657z"/>
          <path d="m124.75 78.186v-0.21167q0-0.66675-0.35983-1.0583-0.35983-0.40216-0.99483-0.40216-0.60325 0-1.0266 0.43392t-0.49741 1.2382zm0.49742 1.9685v0.78316q-0.62442 0.32808-1.524 0.32808-1.2171 0-1.9685-0.74083-0.74083-0.75141-0.74083-1.9791 0-1.2806 0.66675-2.0214 0.66674-0.74083 1.7145-0.74083 1.0054 0 1.5981 0.64558 0.59266 0.64558 0.59266 1.8309 0 0.33867-0.0529 0.62442h-3.6618q0.0953 0.79375 0.60324 1.2171 0.508 0.42333 1.3335 0.42333 0.89958 0 1.4393-0.37042z"/>
          <path d="m128.01 76.525v3.1432q0 0.85725 0.80433 0.85725 0.41275 0 0.73025-0.24342v0.79375q-0.34925 0.1905-0.78316 0.1905-1.5875 0-1.5875-1.6192v-3.1221h-0.85725v-0.67733h0.85725v-1.3335h0.83608v1.3335h1.4817v0.67733z"/>
          <path d="m131.9 81.213-1.651-5.3657h0.88899l0.51859 1.778q0.27516 0.93133 0.45508 1.6298 0.1905 0.68792 0.24341 0.92075l0.0529 0.22225q0.15875-0.67733 0.77258-2.7834l0.508-1.7674h0.889l0.51858 1.7674 0.79375 2.794q0.14816-0.62442 0.81491-2.794l0.53975-1.7674h0.85725l-1.6933 5.3657h-1.0266l-0.508-1.7568-0.74083-2.6776q-0.15875 0.67733-0.71967 2.6776l-0.48683 1.7568z"/>
          <path d="m141.32 81.308q-1.1536 0-1.8309-0.77258-0.66675-0.78316-0.66675-1.9685 0-1.1959 0.68791-1.9897 0.6985-0.80433 1.8098-0.80433 1.2171 0 1.8732 0.78316 0.66675 0.78316 0.66675 1.9897 0 1.1959-0.67733 1.9791t-1.8627 0.78316zm0-4.7942q-0.762 0-1.1959 0.59266-0.43391 0.59266-0.43391 1.4499 0 0.83608 0.4445 1.4287 0.4445 0.58208 1.1853 0.58208 0.80433 0 1.2382-0.5715 0.43392-0.58208 0.43392-1.4393 0-0.889-0.41275-1.4605-0.41275-0.58208-1.2594-0.58208z"/>
          <path d="m145.91 75.847v0.94191q0.42333-0.99483 1.4605-0.99483 0.1905 0 0.29633 0.02117v0.8255q-0.22225-0.07408-0.45508-0.07408-0.56092 0-0.93133 0.51858-0.37042 0.51858-0.37042 1.1959v2.9316h-0.83608l0.0106-5.3657z"/>
          <path d="m148.54 81.213v-7.4401h0.8255v7.4401zm1.9156-2.8152 2.1802 2.8152h-1.0054l-2.159-2.8152 2.1061-2.5506h0.99483z"/>
        </g>
      </g>
    </svg>
  );
};
